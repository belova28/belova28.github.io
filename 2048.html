<html>
	<head>
		<style>
    			#puzzle {
				display: inline-grid;
				grid-template-columns: repeat(4, 1fr);
				padding: 30vw;
				padding-top: 10px;
			}
			input {
				width: 10vw;
				height: 10vw;
				margin: 1px;
				text-align: center;
				font-size: 5vw;
			}
		</style>
		<script>
			numberOfButtons = 16;
			pg = new Array(numberOfButtons);
			for(i=0; i<numberOfButtons; i++){
				pg[i]=0;
			}
			pg[0]=2;
			pg[1]=2;
			pg.sort(()=>Math.random()-0.5)
			btn = new Array(numberOfButtons);
			function play(B){
				n = btn.indexOf(B);
				if(n==1| n==2){
					for(j=0; j<3; j++){
					for(i=4; i<16; i++){
						if(pg[i-4]==0){
							pg[i-4]=pg[i];
							pg[i]=0;
						}
						
					}}
					for(i=4; i<16; i++){
						if (pg[i-4]==pg[i]){
							pg[i-4]=pg[i]*2;
							pg[i]=0;
						}
						if(pg[i-4]==0){
							pg[i-4]=pg[i];
							pg[i]=0;
						}
					}
				}
				else if(n==13| n==14){
					for(j=0; j<3; j++){
					for(i=11; i>=0; i--){
						if(pg[i+4]==0){
							pg[i+4]=pg[i];
							pg[i]=0;
						}
						
					}}
					for(i=11; i>=0; i--){
						if (pg[i+4]==pg[i]){
							pg[i+4]=pg[i]*2;
							pg[i]=0;
						}
						if(pg[i+4]==0){
							pg[i+4]=pg[i];
							pg[i]=0;
						}
					}
				}
				else if(n==4| n==8){
					for(j=0; j<3; j++){
					for(i=1; i<16; i++){
						if(pg[i-1]==0 & i%4 !=0){
							pg[i-1]=pg[i];
							pg[i]=0;
						}
					}}
					for(i=1; i<16; i++){
						if (pg[i-1]==pg[i]){
							pg[i-1]=pg[i]*2;
							pg[i]=0;
						}
						if(pg[i-1]==0 & i%4 !=0){
							pg[i-1]=pg[i];
							pg[i]=0;
						}
					}
				}
				else if(n==7| n==11){
					for(j=0; j<3; j++){
					for(i=14; i>=0; i--){
						if(pg[i+1]==0 & (i+1)%4 !=0){
							pg[i+1]=pg[i];
							pg[i]=0;
						}
						
					}}
					for(i=14; i>=0; i--){
						if (pg[i+1]==pg[i]){
							pg[i+1]=pg[i]*2;
							pg[i]=0;
						}
						if(pg[i+1]==0 & (i+1)%4 !=0){
							pg[i+1]=pg[i];
							pg[i]=0;
						}
					}
				}
				//console.log(n)
				else{return}
				a=new Array(0);
				for(i=0; i<numberOfButtons; i++){
					if(pg[i]==0){
						a=a.concat([i]);
					}
				}
				a.sort(()=>Math.random()-0.5);
				b=[2,2,2,4];
				console.log(b)
				b.sort(()=>Math.random()-0.5);
				pg[a[0]]=b[0];
				for(i=0; i<numberOfButtons; i++){
					btn[i].value = pg[i]==0 ? ' ': pg[i];
				}
			}
		</script>
	</head>
	<body>
		<div id=puzzle>
		</div>
		<script>
			for(i=0; i<numberOfButtons; i++){
				btn[i] = document.createElement("input");
				btn[i].type = "button";
				btn[i].value = pg[i]==0 ? ' ': pg[i];
				btn[i].onclick = function() {play(this)};
				document.getElementById('puzzle').appendChild(btn[i]);
			}
		</script>
	</body>
</html>
